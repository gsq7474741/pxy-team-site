# 国际化实现

前端使用 next-intl 实现国际化，支持中文和英文。

## 配置

### `i18n/config.ts`

```typescript
export const locales = ['zh-CN', 'en'] as const;
export const defaultLocale = 'zh-CN';
```

### `i18n/request.ts`

```typescript
import { getRequestConfig } from 'next-intl/server';
import { cookies } from 'next/headers';

export default getRequestConfig(async () => {
  const cookieStore = await cookies();
  const locale = cookieStore.get('NEXT_LOCALE')?.value || 'zh-CN';
  
  return {
    locale,
    messages: (await import(`../messages/${locale}.json`)).default
  };
});
```

## 翻译文件

### `messages/zh-CN.json`

```json
{
  "nav": {
    "home": "首页",
    "research": "研究方向",
    "publications": "成果概览",
    "members": "团队成员"
  },
  "home": {
    "research_title": "研究方向",
    "news_title": "最新动态"
  }
}
```

### `messages/en.json`

```json
{
  "nav": {
    "home": "Home",
    "research": "Research",
    "publications": "Publications",
    "members": "Team"
  },
  "home": {
    "research_title": "Research Areas",
    "news_title": "Latest News"
  }
}
```

## 使用方法

### 服务端组件

```typescript
import { getTranslations } from 'next-intl/server';

export default async function Page() {
  const t = await getTranslations('home');
  return <h1>{t('research_title')}</h1>;
}
```

### 客户端组件

```typescript
'use client';
import { useTranslations } from 'next-intl';

export default function Component() {
  const t = useTranslations('nav');
  return <span>{t('home')}</span>;
}
```

## 语言切换

用户选择的语言保存在 Cookie `NEXT_LOCALE` 中，有效期 30 天。

```typescript
// 切换语言
document.cookie = `NEXT_LOCALE=${locale};path=/;max-age=${60*60*24*30}`;
window.location.reload();
```
